<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vignette Title • compstatr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Vignette Title">
<meta property="og:description" content="">
<meta property="og:image" content="https://slu-openGIS.github.io/compstatr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">compstatr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/compstatr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/slu-openGIS/compstatr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Vignette Title</h1>
                        <h4 class="author">Vignette Author</h4>
            
            <h4 class="date">2019-03-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/slu-openGIS/compstatr/blob/master/vignettes/compstatr.Rmd"><code>vignettes/compstatr.Rmd</code></a></small>
      <div class="hidden name"><code>compstatr.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The goal of <code>compstatr</code> is to provide a suite of tools for working with crime data made public by the City of St. Louis’s <a href="http://www.slmpd.org">Metropolitan Police Department</a>.</p>
<div id="motivation" class="section level3">
<h3 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h3>
<p>Among cities in the United States, St. Louis has the distinction of having the highest or one of the highest violent crime and homicide rates since 2010. It therefore presents an important site for social scientists, public health researchers, and health care providers as well as policy makers to understand the effects of violent crime on urban communities.</p>
<p>The City’s crime data, however, are diffuclt to work with and present a challenge for researchers. These data are inconsistently organized, with all data before 2013 and some months of 2013 itself having eighteen variables. Beginning during 2013, most (but not all) months have twenty variables, many of which are named differently from their pre-2014 counterparts. These inconsistencies, and the fact that working with their data requires mangaing over 120 spreadsheets that each download with with a <code>.html</code> file extension, are the motivating force behind <code>compstatr</code>.</p>
<p>We therefore provide a set of tools for accessing, preparing, editing, and mapping St. Louis <a href="http://www.slmpd.org">Metropolitan Police Department</a> (SLMPD) crime data, which are available <a href="http://www.slmpd.org/Crimereports.shtml">on their website</a> as <code>.csv</code> files.</p>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>We recommend that users install <code>sf</code> before proceeding with the installation of <code>compstatr</code>. Windows users should be able to install <code>sf</code> without significant issues, but macOS and Linux users will need to install several open source spatial libraries to get <code>sf</code> itself up and running. The easiest approach for macOS users is to install the GDAL 2.0 Complete framework from <a href="https://www.kyngchaos.com/software/frameworks/">Kyng Chaos</a>.</p>
<p>For Linux users, steps will vary based on the flavor being used. Our <a href="https://github.com/slu-openGIS/compstatr/blob/master/.travis.yml">configuration file</a> for Travis CI and its associated <a href="https://github.com/slu-openGIS/areal/blob/master/.travis/install.sh">bash script</a> should be useful in determining the necessary components to install.</p>
<p>Once <code>sf</code> is installed, the development version of <code>compstatr</code> can be accessed from GitHub with <code>remotes</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"slu-openGIS/compstatr"</span>)</a></code></pre></div>
</div>
<div id="tips" class="section level3">
<h3 class="hasAnchor">
<a href="#tips" class="anchor"></a>Tips</h3>
<ul>
<li>All functions support non-standard evaluation, meaning you can use either quoted or unquoted inputs for arguments.</li>
<li>Use RStudio for its helpful auto completion ability. Type <code>cs_</code> to see all of the functions available in this package.</li>
<li>All functions return data as a tibble, which is essentially identical to a data.frame, except for its print behavior in the console and in notebooks.</li>
</ul>
</div>
</div>
<div id="downloading-slmpd-ata" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-slmpd-ata" class="anchor"></a>Downloading SLMPD ata</h2>
</div>
<div id="sample-data" class="section level2">
<h2 class="hasAnchor">
<a href="#sample-data" class="anchor"></a>Sample Data</h2>
<p>The <code>compstatr</code> package contains a single month that can be used for practicing some of the built-in functions. This file, <code>january2018</code> contains all crimes reported that month in St. Louis. It is formatted to match validated data that has been created using <code><a href="../reference/cs_collapse.html">cs_collapse()</a></code> (though, in practice, the result of <code><a href="../reference/cs_collapse.html">cs_collapse()</a></code> should be a full year of data). Any functions for working with dates and times, spatial data, and crime codes can be practiced using these data.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="data-validation" class="section level3">
<h3 class="hasAnchor">
<a href="#data-validation" class="anchor"></a>Data Validation</h3>
<p>The first step in working with the SLMPD data is to import it. Our approach with <code>compstatr</code> is to read into data a year at a time using <code><a href="../reference/cs_load_year.html">cs_load_year()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">data2008 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cs_load_year.html">cs_load_year</a></span>(<span class="kw">here</span>(<span class="st">"data"</span>, <span class="st">"rawData"</span>, <span class="st">"csv"</span>, <span class="st">"2008"</span>))</a></code></pre></div>
<p>The <code><a href="../reference/cs_load_year.html">cs_load_year()</a></code> function requires that all 12 months of data are present. It will load data into a single list object containing a tibble for each month. Months are ordered alphabetically, not numerically (see Fixing Validation Errors below). These are referred to as “year list objects” in the <code>compstatr</code> documentation.</p>
<p>Once a year list object has been created, the <code>cs_validate_year()</code> function can be used to determine what issues exist in a given year’s data. The validation function will check to make sure that: (1) <code>oneMonth</code> - each object in the list contains one month worth of data, (2) <code>valMonth</code> - each object in the list is appropriately positioned alphabetically, (3) <code>varCount</code> - each object in the list has 20 variables, (4) <code>valVars</code> - if there are 20 variables, that they are named correctly, and (5) <code>valClasses</code> - that each of the 20 variables is the proper class.</p>
<p>The <code>cs_validate_year()</code> function returns a tibble that summarizes these results. A <code>TRUE</code> value indicates that the given month meets the given condition, and a <code>FALSE</code> value means it does not. An <code>NA</code> value is reported for <code>valVars</code> and <code>valClasses</code> if there are not 20 variables in the object.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">cs_validate_year</span>(data2008, <span class="dt">year =</span> <span class="st">"2008"</span>)</a></code></pre></div>
</div>
<div id="fixing-valiation-errors---number-of-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#fixing-valiation-errors---number-of-variables" class="anchor"></a>Fixing Valiation Errors - Number of Variables</h3>
<p>The simplest validation errors to fix are instances when there are not 20 variables. The <code><a href="../reference/cs_standardize.html">cs_standardize()</a></code> function is designed to fix two scenarios - the common instance for pre-2014 data where there are only 18 variables, and a less common instance (only May 2017) where there are 26 variables. This function can be used on an entire year list object:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">data2008 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cs_standardize.html">cs_standardize</a></span>(data2008, <span class="dt">config =</span> <span class="dv">18</span>)</a></code></pre></div>
<p>The <code><a href="../reference/cs_standardize.html">cs_standardize()</a></code> function can also be used on a specific month within the year list object:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">data2017 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cs_standardize.html">cs_standardize</a></span>(data2017, <span class="dt">month =</span> <span class="st">"May"</span>, <span class="dt">config =</span> <span class="dv">26</span>)</a></code></pre></div>
<p>In both cases, it returns a copy of the year list object</p>
</div>
<div id="fixing-validation-errors---variable-classes" class="section level3">
<h3 class="hasAnchor">
<a href="#fixing-validation-errors---variable-classes" class="anchor"></a>Fixing Validation Errors - Variable Classes</h3>
<ul>
<li><code>cs_validate_month()</code></li>
</ul>
<p>If there are more specific errors, such as mis-formatted columns, a specific month can be extracted using the <code><a href="../reference/cs_extract_month.html">cs_extract_month()</a></code> function:</p>
<ul>
<li><code><a href="../reference/cs_replace_month.html">cs_replace_month()</a></code></li>
</ul>
</div>
<div id="collapsing-year-list-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#collapsing-year-list-objects" class="anchor"></a>Collapsing Year List Objects</h3>
<ul>
<li><code><a href="../reference/cs_collapse.html">cs_collapse()</a></code></li>
</ul>
</div>
<div id="working-with-dates-and-times" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-dates-and-times" class="anchor"></a>Working with Dates and Times</h3>
<ul>
<li><code><a href="../reference/cs_parse_date.html">cs_parse_date()</a></code></li>
<li><code><a href="../reference/cs_parse_month.html">cs_parse_month()</a></code></li>
</ul>
</div>
<div id="working-with-spatial-data" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-spatial-data" class="anchor"></a>Working with Spatial Data</h3>
<ul>
<li><code><a href="../reference/cs_replace0.html">cs_replace0()</a></code></li>
<li><code><a href="../reference/cs_missingXY.html">cs_missingXY()</a></code></li>
<li><code><a href="../reference/cs_projectXY.html">cs_projectXY()</a></code></li>
</ul>
</div>
<div id="working-with-crime-codes" class="section level3">
<h3 class="hasAnchor">
<a href="#working-with-crime-codes" class="anchor"></a>Working with Crime Codes</h3>
<ul>
<li><code><a href="../reference/cs_crime.html">cs_crime()</a></code></li>
<li><code><a href="../reference/cs_crime_cat.html">cs_crime_cat()</a></code></li>
<li><code>cs_crime_filter()</code></li>
<li><code><a href="../reference/cs_filter_count.html">cs_filter_count()</a></code></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#downloading-slmpd-ata">Downloading SLMPD ata</a></li>
      <li><a href="#sample-data">Sample Data</a></li>
      <li><a href="#usage">Usage</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://chris-prener.github.io">Christopher Prener</a>, Cree Foeller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
